# cog.yaml
build:
  gpu: true  # Enable if using GPU for ML (e.g., Torch)
  cuda: "11.8"  # Specify CUDA version if needed
  system_packages:
    - "libgl1-mesa-glx"  # For matplotlib if plotting
    - "libglib2.0-0"    # General deps
  python_packages:
    - "pip==25.3"  # Upgrade pip first for compatibility
    - "torch==2.9.1"  # Updated to current stable (Nov 2025); remove if unused
    - "pandas==2.0.3"
    - "numpy==1.24.3"
    - "scikit-learn==1.3.0"
    - "scipy==1.11.1"
    - "cog==0.8.5"  # Cog runtime
  run:
    - "pip install -e ."

predict: "predict.py:Predictor"

# Optional: Environment variables, secrets, etc.
# secrets:
#   - imo_registry_api_key  # If adding real API

# Example input/output schema (auto-inferred, but explicit for clarity)
# inputs:
#   - name: ais_json
#     type: str
#     description: AIS JSON batch
# outputs:
#   - name: anomaly_detection
#     type: str
#     description: JSON with score, techniques, impacts
